<html><head></head><body style="overflow-wrap: break-word; -webkit-nbsp-mode: space; line-break: after-white-space;"><div>// ---------- GLOBAL STATE ----------</div><div>let referenceNumber = 0;</div><div>let forcedAttempt = 0;</div><div>let currentAttempt = 0;</div><div><br></div><div>let resetCount = 0;</div><div><br></div><div>let running = false;</div><div>let startTime = 0;</div><div>let interval = null;</div><div><br></div><div>// display elements</div><div>const minEl = document.getElementById("min");</div><div>const secEl = document.getElementById("sec");</div><div>const msEl &nbsp;= document.getElementById("ms");</div><div><br></div><div>// page elements</div><div>const page1 = document.getElementById("page1");</div><div>const page2 = document.getElementById("page2");</div><div><br></div><div>// buttons</div><div>const nextBtn = document.getElementById("nextBtn");</div><div>const clearBtn = document.getElementById("clearBtn");</div><div>const startStopBtn = document.getElementById("startStopBtn");</div><div>const resetBtn = document.getElementById("resetBtn");</div><div><br></div><div>// inputs</div><div>const figureInput = document.getElementById("figureInput");</div><div>const attemptInput = document.getElementById("attemptInput");</div><div><br></div><div>// ---------- UTIL ----------</div><div>function pad(n) {</div><div>&nbsp; return n.toString().padStart(2, "0");</div><div>}</div><div><br></div><div>function showPage2() {</div><div>&nbsp; page1.classList.remove("active");</div><div>&nbsp; page2.classList.add("active");</div><div>}</div><div><br></div><div>// ---------- PAGE 1 LOGIC ----------</div><div>nextBtn.onclick = () =&gt; {</div><div>&nbsp; referenceNumber = parseInt(figureInput.value);</div><div>&nbsp; forcedAttempt = parseInt(attemptInput.value);</div><div><br></div><div>&nbsp; if (!referenceNumber || !forcedAttempt) return;</div><div><br></div><div>&nbsp; currentAttempt = 0;</div><div>&nbsp; showPage2();</div><div>};</div><div><br></div><div>clearBtn.onclick = () =&gt; {</div><div>&nbsp; figureInput.value = "";</div><div>&nbsp; attemptInput.value = "";</div><div>};</div><div><br></div><div>// ---------- STOPWATCH ----------</div><div>function updateDisplay(ms) {</div><div>&nbsp; const totalMs = Math.max(ms, 0);</div><div>&nbsp; const minutes = Math.floor(totalMs / 60000);</div><div>&nbsp; const seconds = Math.floor((totalMs % 60000) / 1000);</div><div>&nbsp; const centi = Math.floor((totalMs % 1000) / 10);</div><div><br></div><div>&nbsp; minEl.textContent = pad(minutes);</div><div>&nbsp; secEl.textContent = pad(seconds);</div><div>&nbsp; msEl.textContent &nbsp;= pad(centi);</div><div>}</div><div><br></div><div>function start() {</div><div>&nbsp; running = true;</div><div>&nbsp; startTime = Date.now();</div><div>&nbsp; startStopBtn.textContent = "Stop";</div><div>&nbsp; startStopBtn.classList.remove("start");</div><div>&nbsp; startStopBtn.classList.add("stop");</div><div><br></div><div>&nbsp; interval = setInterval(() =&gt; {</div><div>&nbsp; &nbsp; updateDisplay(Date.now() - startTime);</div><div>&nbsp; }, 16);</div><div>}</div><div><br></div><div>function stop() {</div><div>&nbsp; running = false;</div><div>&nbsp; clearInterval(interval);</div><div><br></div><div>&nbsp; currentAttempt++;</div><div><br></div><div>&nbsp; // FORCED ATTEMPT</div><div>&nbsp; if (currentAttempt === forcedAttempt) {</div><div>&nbsp; &nbsp; forceResult();</div><div>&nbsp; }</div><div><br></div><div>&nbsp; startStopBtn.textContent = "Start";</div><div>&nbsp; startStopBtn.classList.remove("stop");</div><div>&nbsp; startStopBtn.classList.add("start");</div><div>}</div><div><br></div><div>function forceResult() {</div><div>&nbsp; // derive natural-looking time</div><div>&nbsp; const seconds = Math.floor(referenceNumber / 8);</div><div>&nbsp; const centi = referenceNumber % 100;</div><div><br></div><div>&nbsp; let fakeMs = seconds * 1000 + centi * 10;</div><div>&nbsp; let drift = fakeMs - (Date.now() - startTime);</div><div><br></div><div>&nbsp; let steps = 20;</div><div>&nbsp; let step = drift / steps;</div><div>&nbsp; let current = Date.now() - startTime;</div><div><br></div><div>&nbsp; let i = 0;</div><div>&nbsp; let slow = setInterval(() =&gt; {</div><div>&nbsp; &nbsp; current += step;</div><div>&nbsp; &nbsp; updateDisplay(current);</div><div>&nbsp; &nbsp; i++;</div><div>&nbsp; &nbsp; if (i &gt;= steps) {</div><div>&nbsp; &nbsp; &nbsp; clearInterval(slow);</div><div>&nbsp; &nbsp; &nbsp; updateDisplay(fakeMs);</div><div>&nbsp; &nbsp; }</div><div>&nbsp; }, 20);</div><div>}</div><div><br></div><div>// ---------- BUTTON EVENTS ----------</div><div>startStopBtn.onclick = () =&gt; {</div><div>&nbsp; if (!running) {</div><div>&nbsp; &nbsp; start();</div><div>&nbsp; } else {</div><div>&nbsp; &nbsp; stop();</div><div>&nbsp; }</div><div>};</div><div><br></div><div>resetBtn.onclick = () =&gt; {</div><div>&nbsp; clearInterval(interval);</div><div>&nbsp; running = false;</div><div>&nbsp; updateDisplay(0);</div><div>&nbsp; currentAttempt = 0;</div><div><br></div><div>&nbsp; // RESET DRIFT LOGIC</div><div>&nbsp; resetCount++;</div><div>&nbsp; if (resetCount === 1) referenceNumber += 4;</div><div>&nbsp; else if (resetCount === 3) referenceNumber -= 4;</div><div><br></div><div>&nbsp; attemptInput.value = "1";</div><div><br></div><div>&nbsp; startStopBtn.textContent = "Start";</div><div>&nbsp; startStopBtn.classList.remove("stop");</div><div>&nbsp; startStopBtn.classList.add("start");</div><div>};</div><div><br></div><div>// ---------- SAFETY ----------</div><div>document.addEventListener("gesturestart", e =&gt; e.preventDefault());</div><div>document.addEventListener("dblclick", e =&gt; e.preventDefault());</div><div><br></div><div>// ---------- SERVICE WORKER ----------</div><div>if ("serviceWorker" in navigator) {</div><div>&nbsp; navigator.serviceWorker.register("service-worker.js");</div><div>}</div></body></html>